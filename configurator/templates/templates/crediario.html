{% extends "base.html" %}
{% block title %}Crediário — {{ tenant|capitalize }}{% endblock %}

{% block content %}
<style>
  /* =========================================================
     CREDIÁRIO — adaptado pro layout com sidebar
     - NÃO altera .container global
     - Ocupa todo o MAIN (sem “miolo” estreito)
     - Evita scroll horizontal no app-shell
     ========================================================= */

  /* Escopo do módulo */
  .cred-scope{
    /* tokens locais (evita conflito com base) */
    --bg: #f6f7fb;
    --surface: #ffffff;
    --surface-2: #f2f4f8;
    --surface-3: #eef1f6;

    --text: #101828;
    --muted: #667085;
    --muted-2: #98a2b3;

    --border: rgba(16,24,40,.10);
    --border-2: rgba(16,24,40,.14);

    --shadow-sm: 0 6px 16px rgba(16,24,40,.08);
    --shadow-md: 0 14px 34px rgba(16,24,40,.12);

    --r-sm: 12px;
    --r-md: 16px;
    --r-lg: 20px;

    --focus: color-mix(in srgb, var(--accent) 45%, #3b82f6);

    width: 100%;
    max-width: 1400px;          /* mais largo pra não sobrar “vazio” no main */
    margin: 0 auto;             /* centraliza dentro do main, mas ocupando bem mais */
    display: flex;
    flex-direction: column;
    gap: 1.15rem;

    background: transparent;

    /* CRÍTICO: evita estouro do grid do app-shell */
    min-width: 0;
    overflow-x: clip; /* ou hidden (clip é mais “clean”) */
  }

  /* ---- header ---- */
  .cred-header{
    display:flex;
    justify-content:space-between;
    align-items:flex-end;
    gap:1rem;
    flex-wrap:wrap;
    min-width:0;
  }

  .cred-header-left{
    display:flex;
    flex-direction:column;
    gap:.25rem;
    min-width:0;
  }

  .cred-title{
    margin:0;
    font-size: 1.45rem;
    letter-spacing:-.02em;
    color: var(--text);
    display:flex;
    align-items:center;
    gap:.55rem;
    line-height: 1.2;
  }
  .cred-title small{
    font-size:.92rem;
    color: var(--muted);
    font-weight:800;
  }

  .cred-subtitle{
    display:block;
    font-size:.92rem;
    color: var(--muted);
    max-width: 75ch;
  }

  .cred-icon{
    display:inline-flex;
    align-items:center;
    justify-content:center;
    padding:.25rem;
    border-radius:999px;
    background: color-mix(in srgb, var(--accent) 14%, #fff);
    color: var(--accent);
    border:1px solid color-mix(in srgb, var(--accent) 18%, var(--border));
  }

  /* ---- grid ---- */
  .cred-grid{
    display:grid;
    grid-template-columns: minmax(300px, 390px) 1fr;
    gap: 1.15rem;
    align-items: start;

    min-width:0;
  }
  @media (max-width: 980px){
    .cred-grid{ grid-template-columns: 1fr; }
  }

  /* ---- cards ---- */
  .cred-card{
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: var(--r-lg);
    padding: 1rem 1.05rem 1.1rem;
    box-shadow: var(--shadow-md);

    /* CRÍTICO: evita “grid estourar” */
    min-width:0;
  }

  .cred-card-header{
    display:flex;
    justify-content:space-between;
    align-items:center;
    gap:.75rem;
    margin-bottom:.85rem;
    min-width:0;
  }
  .cred-card h2{
    margin:0;
    font-size: 1.05rem;
    color: var(--text);
    letter-spacing:-.01em;
  }

  .cred-tag{
    font-size:.74rem;
    padding:.18rem .62rem;
    border-radius:999px;
    border:1px solid var(--border);
    background: var(--surface-2);
    color: var(--muted);
    font-weight:900;
    white-space:nowrap;
  }
  .cred-tag-new{
    border-color: color-mix(in srgb, var(--accent) 36%, var(--border));
    background: color-mix(in srgb, var(--accent) 12%, #fff);
    color: var(--accent);
  }

  .cred-count{
    font-size:.85rem;
    color: var(--muted);
    font-weight:800;
    white-space:nowrap;
  }

  /* ---- form ---- */
  .cred-form{
    display:flex;
    flex-direction:column;
    gap:.7rem;
    min-width:0;
  }

  .cred-form label{
    font-size:.85rem;
    font-weight:900;
    color: color-mix(in srgb, var(--text) 92%, var(--muted));
    display:block;
    margin-bottom:.32rem;
  }

  .cred-form input,
  .cred-form textarea,
  .cred-form select{
    width:100%;
    background:#fff;
    color: var(--text);
    border-radius: 14px;
    border: 1px solid var(--border);
    padding: .58rem .7rem;
    font-size:.92rem;
    box-sizing:border-box;
    transition: border-color .16s ease, box-shadow .16s ease, background .16s ease;
  }

  .cred-form textarea{
    min-height: 84px;
    resize: vertical;
  }

  .cred-form input:focus,
  .cred-form textarea:focus,
  .cred-form select:focus{
    outline:none;
    border-color: color-mix(in srgb, var(--accent) 30%, var(--border));
    box-shadow: 0 0 0 4px color-mix(in srgb, var(--focus) 26%, transparent);
  }

  .cred-row-2{
    display:grid;
    grid-template-columns: 1fr 1fr;
    gap: .75rem;
    min-width:0;
  }
  @media (max-width: 620px){
    .cred-row-2{ grid-template-columns:1fr; }
  }

  .cred-hint{
    font-size:.78rem;
    color: var(--muted);
    margin-top:.28rem;
    line-height:1.35;
  }

  /* ---- buttons ---- */
  .btn-primary{
    display:inline-flex;
    align-items:center;
    justify-content:center;
    gap:.35rem;

    border-radius:999px;
    padding:.65rem 1.05rem;
    font-weight:950;
    font-size:.92rem;

    background: color-mix(in srgb, var(--accent) 18%, #ffffff);
    border:1px solid color-mix(in srgb, var(--accent) 30%, var(--border));
    color: var(--text);
    cursor:pointer;

    transition: transform .16s ease, box-shadow .16s ease, background .16s ease, border-color .16s ease;
  }
  .btn-primary:hover{
    transform: translateY(-1px);
    box-shadow: var(--shadow-sm);
    background: color-mix(in srgb, var(--accent-2) 18%, #ffffff);
    border-color: color-mix(in srgb, var(--accent-2) 30%, var(--border));
  }
  .btn-primary:focus-visible{
    outline:none;
    box-shadow: 0 0 0 4px color-mix(in srgb, var(--focus) 28%, transparent);
  }

  .btn-link{
    background:none;
    border:none;
    padding:0;
    font-weight:900;
    color: var(--accent-2);
    cursor:pointer;
    text-decoration:none;
  }
  .btn-link:hover{ text-decoration:underline; }

  .cred-actions-footer{
    display:flex;
    gap:.85rem;
    align-items:center;
    margin-top:.25rem;
    flex-wrap:wrap;
  }

  /* ---- filtros ---- */
  .cred-filters{
    display:flex;
    flex-wrap:wrap;
    gap: .7rem .9rem;
    padding: .15rem 0 .9rem;
    align-items:flex-end;

    min-width:0;
  }

  .cred-filter-group{
    display:flex;
    flex-direction:column;
    gap:.22rem;
    min-width:0;
  }

  .cred-filter-group label{
    font-size:.76rem;
    font-weight:900;
    color: var(--muted);
  }

  .cred-filter-group input,
  .cred-filter-group select{
    min-width: 170px;
    max-width: 100%;
    border-radius: 999px;
    padding: .42rem .9rem;
    border: 1px solid var(--border);
    background: #fff;
    color: var(--text);
    font-size: .86rem;
    transition: border-color .16s ease, box-shadow .16s ease;
  }

  .cred-filter-group input:focus,
  .cred-filter-group select:focus{
    outline:none;
    border-color: color-mix(in srgb, var(--accent) 28%, var(--border));
    box-shadow: 0 0 0 4px color-mix(in srgb, var(--focus) 22%, transparent);
  }

  .btn-mini-apply{
    border-radius: 999px;
    padding: .42rem .95rem;
    font-size: .86rem;
    font-weight:950;

    border: 1px solid color-mix(in srgb, var(--accent) 28%, var(--border));
    background: color-mix(in srgb, var(--accent) 12%, #fff);
    color: var(--text);
    cursor:pointer;

    transition: transform .16s ease, box-shadow .16s ease, background .16s ease, border-color .16s ease;
  }
  .btn-mini-apply:hover{
    transform: translateY(-1px);
    box-shadow: var(--shadow-sm);
    background: color-mix(in srgb, var(--accent-2) 12%, #fff);
    border-color: color-mix(in srgb, var(--accent-2) 22%, var(--border));
  }

  .btn-mini{
    display:inline-flex;
    align-items:center;
    justify-content:center;

    width:auto;
    border-radius:999px;
    padding:.42rem .95rem;
    font-size:.86rem;
    font-weight:950;

    border:1px solid var(--border);
    background: var(--surface);
    color: var(--text);
    cursor:pointer;

    transition: background .16s ease, border-color .16s ease, transform .16s ease, box-shadow .16s ease;
    text-decoration:none;
  }
  .btn-mini:hover{
    transform: translateY(-1px);
    box-shadow: var(--shadow-sm);
    background: var(--surface-2);
    border-color: color-mix(in srgb, var(--accent) 18%, var(--border));
  }

  .btn-mini-danger{
    border-color: rgba(220,38,38,.35);
    background: rgba(220,38,38,.08);
    color: #b42318;
  }
  .btn-mini-primary{
    border-color: color-mix(in srgb, var(--accent) 30%, var(--border));
    background: color-mix(in srgb, var(--accent) 10%, #fff);
  }

  /* ---- tabela ---- */
  .cred-table-wrap{
    border-radius: var(--r-md);
    border: 1px solid var(--border);
    overflow:auto;
    background: var(--surface);

    /* CRÍTICO: não deixa “empurrar” o grid do main */
    max-width: 100%;
    min-width: 0;
  }

  table.cred-table{
    width:100%;
    border-collapse:collapse;
    font-size:.86rem;
    table-layout: fixed;
  }

  .cred-table thead th{
    position: sticky;
    top: 0;
    background: var(--surface-2);
    padding:.65rem .8rem;
    text-align:left;
    border-bottom:1px solid var(--border);
    white-space:nowrap;

    font-size:.78rem;
    text-transform:uppercase;
    letter-spacing:.04em;
    color: var(--muted);
  }

  .cred-table tbody td{
    padding:.7rem .8rem;
    border-bottom:1px solid rgba(16,24,40,.08);
    vertical-align:top;
    color: var(--text);
  }

  .cred-table tbody tr:hover{
    background: color-mix(in srgb, var(--accent) 6%, #fff);
  }

  /* larguras das colunas */
  .cred-table thead th:nth-child(1),
  .cred-table tbody td:nth-child(1){ width: 52px; color: var(--muted); font-weight: 900; }

  .cred-table thead th:nth-child(2),
  .cred-table tbody td:nth-child(2){ width: 210px; }

  .cred-table thead th:nth-child(3),
  .cred-table tbody td:nth-child(3){ width: 250px; }

  .cred-table thead th:nth-child(4),
  .cred-table tbody td:nth-child(4){ width: 155px; }

  .cred-table thead th:nth-child(5),
  .cred-table tbody td:nth-child(5){ width: 120px; }

  .cred-table thead th:nth-child(6),
  .cred-table tbody td:nth-child(6){ width: 170px; }

  .cred-table thead th:nth-child(7),
  .cred-table tbody td:nth-child(7){ width: 170px; }

  /* cliente */
  .cred-client{
    display:flex;
    flex-direction:column;
    gap:.12rem;
    min-width:0;
  }
  .cred-client-name{
    font-weight:950;
    font-size:.92rem;
    color: var(--text);
    line-height: 1.2;
  }
  .cred-client-contact{
    display:inline-flex;
    align-items:center;
    gap:.35rem;
    font-size:.78rem;
    color: var(--muted);
    line-height: 1.2;
    min-width:0;
  }
  .cred-client-contact-label{
    text-transform:uppercase;
    letter-spacing:.04em;
    font-size:.7rem;
    color: var(--muted-2);
    font-weight:900;
  }

  /* valores */
  .cred-values{
    display:grid;
    grid-template-columns: 1fr auto;
    column-gap: .9rem;
    row-gap: .3rem;
    min-width: 0;
  }
  .cred-value-label{
    font-size:.78rem;
    color: var(--muted);
    font-weight:800;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }
  .cred-value-amount{
    font-size:.86rem;
    font-weight:950;
    text-align:right;
    color: var(--text);
    white-space: nowrap;
    font-variant-numeric: tabular-nums;
  }

  .cred-parc-info{
    font-size:.86rem;
    color: var(--text);
    line-height:1.35;
    white-space: nowrap;
  }

  /* status */
  .pill-status{
    display:inline-flex;
    align-items:center;
    justify-content:center;
    padding:.22rem .65rem;
    border-radius:999px;
    font-size:.75rem;
    font-weight:950;
  }
  .pill-aberto{
    background: rgba(46,204,113,.14);
    border:1px solid rgba(46,204,113,.30);
    color:#1f7a3a;
  }
  .pill-quitado{
    background: rgba(127,140,141,.16);
    border:1px solid rgba(127,140,141,.28);
    color:#475467;
  }

  /* obs */
  .cred-obs-cell{ max-width: none; min-width:0; }
  .cred-obs-cell .cred-small{
    display:block;
    font-size:.8rem;
    color: var(--muted);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }
  .cred-obs-cell .cred-small.muted{ color: var(--muted-2); }
  .cred-obs-cell .cred-small + .cred-small{ margin-top: .25rem; }

  /* ações */
  .cred-actions{
    display:flex;
    flex-direction:column;
    gap:.4rem;
    min-width: 0;
    align-items: stretch;
  }
  .cred-actions form{ margin:0; }
  .cred-actions .btn-mini{ width: 100%; }

  .cred-actions form:first-child{
    display:flex;
    flex-direction:column;
    gap:.35rem;
  }

  .qtd-input{
    width: 100%;
    border-radius: 12px;
    border: 1px solid var(--border);
    background:#fff;
    color: var(--text);
    padding: .45rem .55rem;
    font-size:.86rem;
    text-align:center;
    margin-right: 0;
  }
  .qtd-input:focus{
    outline:none;
    border-color: color-mix(in srgb, var(--accent) 28%, var(--border));
    box-shadow: 0 0 0 4px color-mix(in srgb, var(--focus) 22%, transparent);
  }

  .cred-empty{
    padding: 1rem;
    color: var(--muted);
    font-weight:800;
  }

  @media (max-width: 920px){
    table.cred-table{ min-width: 980px; } /* scroll fica só DENTRO da tabela */
  }
</style>

<div class="cred-scope">

  <div class="cred-header">
    <div class="cred-header-left">
      <h1 class="cred-title">
        <span class="cred-icon" aria-hidden="true">
          <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="3" y="4" width="18" height="16" rx="2"></rect>
            <path d="M8 10h8M8 14h5"></path>
          </svg>
        </span>
        Crediário <small>({{ tenant|capitalize }})</small>
      </h1>

      <small class="cred-subtitle">
        Cadastre clientes com dívida em aberto e controle parcelas, vencimento e pagamentos.
      </small>
    </div>
  </div>

  <div class="cred-grid">
    <!-- Formulário -->
    <section class="cred-card">
      {% if edit_registro %}
        <div class="cred-card-header">
          <h2>Editar registro #{{ edit_registro.id }}</h2>
          <span class="cred-tag">Edição</span>
        </div>

        <form method="post"
              class="cred-form"
              action="{{ url_for('crediario.editar', registro_id=edit_registro.id) }}">

          <div>
            <label>Cliente *</label>
            <input type="text" name="cliente" required
                   value="{{ edit_registro.cliente }}"
                   placeholder="Nome do cliente">
          </div>

          <div>
            <label>Contato</label>
            <input type="text" name="contato"
                   value="{{ edit_registro.contato }}"
                   placeholder="Telefone, WhatsApp...">
          </div>

          <div>
            <label>Descrição / Itens</label>
            <textarea name="descricao"
                      placeholder="Ex.: produtos, observações gerais...">{{ edit_registro.descricao }}</textarea>
          </div>

          <div class="cred-row-2">
            <div>
              <label>Valor total *</label>
              <input type="text" name="total" required
                     value="{{ edit_registro._total_raw }}"
                     placeholder="Ex.: 150,00">
              <div class="cred-hint">Valor completo da compra.</div>
            </div>
            <div>
              <label>Entrada</label>
              <input type="text" name="entrada"
                     value="{{ edit_registro._entrada_raw }}"
                     placeholder="Ex.: 50,00 (opcional)">
              <div class="cred-hint">Se deixar em branco, não considera entrada.</div>
            </div>
          </div>

          <div class="cred-row-2">
            <div>
              <label>Parcelas</label>
              <input type="number" name="parcelas" min="1" max="36"
                     value="{{ edit_registro._parcelas_int }}">
              <div class="cred-hint">Quantidade de parcelas (1 = à vista no crediário).</div>
            </div>
            <div>
              <label>Dia do vencimento</label>
              <input type="number" name="dia_vencimento" min="1" max="31"
                     value="{{ edit_registro.dia_vencimento }}">
              <div class="cred-hint">Dia do mês em que o cliente costuma pagar.</div>
            </div>
          </div>

          <div>
            <label>Observação interna</label>
            <input type="text" name="observacao"
                   value="{{ edit_registro.observacao }}"
                   placeholder="Ex.: combinado pagar sempre dia 10, cliente antigo, etc.">
          </div>

          <div class="cred-actions-footer">
            <button type="submit" class="btn-primary">Salvar alterações</button>
            <a href="{{ url_for('crediario.index') }}" class="btn-link">Cancelar edição</a>
          </div>
        </form>

      {% else %}
        <div class="cred-card-header">
          <h2>Novo registro</h2>
          <span class="cred-tag cred-tag-new">Novo</span>
        </div>

        <form method="post" class="cred-form">
          <div>
            <label>Cliente *</label>
            <input type="text" name="cliente" required placeholder="Nome do cliente">
          </div>

          <div>
            <label>Contato</label>
            <input type="text" name="contato" placeholder="Telefone, WhatsApp...">
          </div>

          <div>
            <label>Descrição / Itens</label>
            <textarea name="descricao" placeholder="Ex.: produtos, observações gerais..."></textarea>
          </div>

          <div class="cred-row-2">
            <div>
              <label>Valor total *</label>
              <input type="text" name="total" required placeholder="Ex.: 150,00">
              <div class="cred-hint">Valor completo da compra.</div>
            </div>
            <div>
              <label>Entrada</label>
              <input type="text" name="entrada" placeholder="Ex.: 50,00 (opcional)">
              <div class="cred-hint">Se deixar em branco, não considera entrada.</div>
            </div>
          </div>

          <div class="cred-row-2">
            <div>
              <label>Parcelas</label>
              <input type="number" name="parcelas" min="1" max="36" value="1">
              <div class="cred-hint">Quantidade de parcelas (1 = à vista no crediário).</div>
            </div>
            <div>
              <label>Dia do vencimento</label>
              <input type="number" name="dia_vencimento" min="1" max="31" value="10">
              <div class="cred-hint">Dia do mês em que o cliente costuma pagar.</div>
            </div>
          </div>

          <div>
            <label>Observação interna</label>
            <input type="text" name="observacao"
                   placeholder="Ex.: combinado pagar sempre dia 10, cliente antigo, etc.">
          </div>

          <div class="cred-actions-footer">
            <button type="submit" class="btn-primary">Salvar registro</button>
          </div>
        </form>
      {% endif %}
    </section>

    <!-- Lista -->
    <section class="cred-card">
      <div class="cred-card-header">
        <h2>Registros cadastrados</h2>
        <span class="cred-count">
          {{ registros|length }} registro{{ '' if registros|length == 1 else 's' }} encontrado{{ '' if registros|length == 1 else 's' }}.
        </span>
      </div>

      <!-- Filtros -->
      <form method="get" class="cred-filters">
        <div class="cred-filter-group">
          <label>Buscar (cliente, contato, descrição...)</label>
          <input type="text" name="q" value="{{ filter_q or '' }}" placeholder="Ex.: nome do cliente">
        </div>

        <div class="cred-filter-group">
          <label>Status</label>
          {% set fs = (filter_status or '')|upper %}
          <select name="status">
            <option value="">Todos</option>
            <option value="ABERTO"  {{ 'selected' if fs == 'ABERTO'  else '' }}>Em aberto</option>
            <option value="QUITADO" {{ 'selected' if fs == 'QUITADO' else '' }}>Quitado</option>
          </select>
        </div>

        <div class="cred-filter-group">
          <label>Vencimento</label>
          {% set fv = (filter_vencimento or '') %}
          <select name="vencimento">
            <option value="">Todos</option>
            <option value="hoje" {{ 'selected' if fv == 'hoje' else '' }}>Vencendo hoje</option>
            {% for d in range(1, 32) %}
              <option value="{{ d }}" {{ 'selected' if fv == d|string else '' }}>Dia {{ d }}</option>
            {% endfor %}
          </select>
        </div>

        <div class="cred-filter-group">
          <button type="submit" class="btn-mini-apply">Aplicar filtros</button>
          <a href="{{ url_for('crediario.index') }}" class="btn-mini">Limpar</a>
        </div>
      </form>

      <div class="cred-table-wrap">
        {% if registros %}
          <table class="cred-table">
            <thead>
              <tr>
                <th>#</th>
                <th>Cliente</th>
                <th>Valores</th>
                <th>Parcelas / Venc.</th>
                <th>Status</th>
                <th>Obs.</th>
                <th>Ações</th>
              </tr>
            </thead>
            <tbody>
              {% for r in registros %}
                {% set st = (r.status or 'ABERTO')|upper %}
                {% set pendentes = r._parcelas_int - r._parcelas_pagas_int %}
                <tr>
                  <td>{{ r.id }}</td>

                  <td>
                    <div class="cred-client">
                      <div class="cred-client-name">{{ r.cliente }}</div>
                      {% if r.contato %}
                        <div class="cred-client-contact">
                          <span class="cred-client-contact-label">contato</span>
                          <span>{{ r.contato }}</span>
                        </div>
                      {% endif %}
                    </div>
                  </td>

                  <td>
                    <div class="cred-values">
                      <div class="cred-value-label">Total</div>
                      <div class="cred-value-amount">{{ r._total_fmt }}</div>

                      <div class="cred-value-label">Entrada</div>
                      <div class="cred-value-amount">{{ r._entrada_fmt }}</div>

                      <div class="cred-value-label">Parcela</div>
                      <div class="cred-value-amount">{{ r._parcela_fmt }}</div>

                      <div class="cred-value-label">Restante</div>
                      <div class="cred-value-amount">{{ r._restante_fmt }}</div>
                    </div>
                  </td>

                  <td class="cred-parc-info">
                    <div>{{ r._parcelas_int }}x (pagas: {{ r._parcelas_pagas_int }})</div>
                    <div>Venc.: dia {{ r.dia_vencimento }}</div>
                  </td>

                  <td>
                    {% if st == 'QUITADO' %}
                      <span class="pill-status pill-quitado">Quitado</span>
                    {% else %}
                      <span class="pill-status pill-aberto">Em aberto</span>
                    {% endif %}
                  </td>

                  <td class="cred-obs-cell">
                    <span class="cred-small muted">{{ r.descricao }}</span>
                    <span class="cred-small">{{ r.observacao }}</span>
                  </td>

                  <td class="cred-actions">
                    {% if st != 'QUITADO' and pendentes > 0 %}
                      <form method="post"
                            action="{{ url_for('crediario.pagar_parcela', registro_id=r.id) }}"
                            onsubmit="return confirm('Registrar pagamento de parcela(s) do registro #{{ r.id }}?');">
                        <input class="qtd-input" type="number" name="qtd"
                               min="1" max="{{ pendentes }}" value="1">
                        <button type="submit" class="btn-mini btn-mini-primary">Registrar</button>
                      </form>
                    {% endif %}

                    {% if st != 'QUITADO' %}
                      <form method="post"
                            action="{{ url_for('crediario.quitar', registro_id=r.id) }}"
                            onsubmit="return confirm('Marcar registro #{{ r.id }} como totalmente quitado?');">
                        <button type="submit" class="btn-mini">Quitar tudo</button>
                      </form>
                    {% endif %}

                    <a href="{{ url_for('crediario.index', edit=r.id) }}" class="btn-mini">Editar</a>

                    <form method="post"
                          action="{{ url_for('crediario.excluir', registro_id=r.id) }}"
                          onsubmit="return confirm('Excluir registro #{{ r.id }}? Esta ação não pode ser desfeita.');">
                      <button type="submit" class="btn-mini btn-mini-danger">Excluir</button>
                    </form>
                  </td>
                </tr>
              {% endfor %}
            </tbody>
          </table>
        {% else %}
          <div class="cred-empty">
            Nenhum registro de crediário cadastrado ainda para {{ tenant|capitalize }}.
          </div>
        {% endif %}
      </div>
    </section>
  </div>

</div>
{% endblock %}
